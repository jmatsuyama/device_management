# 画面遷移図

## 1. 認証フロー

```
ログイン画面 (login.html)
├── [JEIS] ホーム画面 (home.html)
│   ├── デバイス一覧 (devices_new.html)
│   ├── ロッカー管理 (lockers_new.html)
│   ├── ユーザー管理 (users_new.html)
│   └── マスター管理 (master_new.html)
└── [JR] 受付画面 (reception.html)
    └── パスワード入力画面 (password_input.html)
```

### 1.1 アクセス制限
- JEIS専用ページ（@jeis_required）
  - マスター管理画面
  - デバイス追加/編集/削除
  - CSVインポート/エクスポート
- JR専用ページ（@jr_required）
  - 受付画面
  - パスワード入力画面

## 2. JEIS側画面フロー

### 2.1 デバイス管理
```
デバイス一覧 (devices_new.html)
├── 新規デバイス追加 (add.html)
│   └── [登録] → デバイス一覧
├── デバイス編集 (edit.html)
│   └── [更新] → デバイス一覧
└── [削除] → デバイス一覧
```

### 2.2 ロッカー管理
```
ロッカー一覧 (lockers_new.html)
├── [ロック/アンロック] → ロッカー一覧
└── パスワード発行
    └── [発行] → ロッカー一覧
```

### 2.3 ユーザー管理
```
ユーザー一覧 (users_new.html)
├── ユーザー追加 (add_user.html)
│   └── [登録] → ユーザー一覧
└── [削除] → ユーザー一覧
```

## 3. JR側画面フロー

### 3.1 受付業務
```
受付画面 (reception.html)
└── パスワード入力画面 (password_input.html)
    └── [認証成功] → ロッカー解錠
```

## 4. 共通要素

### 4.1 ヘッダー
- ロゴ
- ナビゲーションメニュー
  - [JEIS]
    - ホーム
    - デバイス一覧
    - ロッカー一覧
    - ユーザー管理
    - マスター管理
    - ログアウト
  - [JR]
    - 受付画面
    - ログアウト

### 4.2 フッター
- コピーライト
- バージョン情報

## 5. 画面詳細

### 5.1 ログイン画面 (login.html)
- ユーザーID入力フィールド
- パスワード入力フィールド
- ログインボタン
- エラーメッセージ表示領域

### 5.2 デバイス一覧画面 (devices_new.html) [JEIS専用]
- デバイス一覧テーブル
  - ID
  - 設置場所
  - PC/ID
  - ステータス
  - 解除期限
  - 故障機交換
  - 操作ボタン
    - 編集
    - 削除
- 新規追加ボタン
- マスター管理へのリンク

### 5.3 ロッカー一覧画面 (lockers_new.html) [JEIS専用]
- ロッカー一覧テーブル
  - ロッカー名
  - 状態（ロック/アンロック）
  - 最終更新日時
  - パスワード（設定時のみ表示）
  - 格納デバイス情報
  - 操作ボタン
    - ロック/アンロック切替
    - パスワード発行
- ステータス更新ボタン
- パスワード発行機能
  - デバイス選択
  - ロッカー選択
  - 有効期限設定

### 5.4 ユーザー管理画面 (users_new.html) [JEIS専用]
- ユーザー一覧テーブル
  - 名前
  - ユーザーID
  - 所属組織（JEIS/JR）
  - 操作ボタン
    - 削除（管理者は削除不可）
- 新規ユーザー追加ボタン
  - ユーザー名
  - ユーザーID（一意）
  - パスワード
  - 所属組織選択

### 5.5 マスター管理画面 (master_new.html) [JEIS専用]
- CSVインポート機能
  - ファイル選択（.csv）
  - アップロードボタン
  - ヘッダー要件：ID,箇所名,PC/ID,ステータス,解除期限,故障機交換
- CSVエクスポート機能
  - ダウンロードボタン（BOM付きUTF-8）
- 処理結果メッセージ表示領域
  - 成功/エラーメッセージ
  - バリデーションエラー詳細

### 5.6 受付画面 (reception.html) [JR専用]
- パスワード入力画面へのリンク

### 5.7 パスワード入力画面 (password_input.html) [JR専用]
- ロッカー選択
- パスワード入力フォーム（4桁）
- 認証ボタン
- 結果メッセージ表示領域
  - 成功：ロッカー解錠通知
  - エラー：パスワード不一致/期限切れ